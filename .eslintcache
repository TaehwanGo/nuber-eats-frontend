[{"C:\\github\\nuber-eats-frontend\\src\\App.tsx":"1","C:\\github\\nuber-eats-frontend\\src\\reportWebVitals.ts":"2","C:\\github\\nuber-eats-frontend\\src\\index.tsx":"3","C:\\github\\nuber-eats-frontend\\src\\routers\\logged-out-router.tsx":"4","C:\\github\\nuber-eats-frontend\\src\\apollo.ts":"5","C:\\github\\nuber-eats-frontend\\src\\routers\\logged-in-router.tsx":"6","C:\\github\\nuber-eats-frontend\\src\\pages\\login.tsx":"7","C:\\github\\nuber-eats-frontend\\src\\pages\\create-account.tsx":"8","C:\\github\\nuber-eats-frontend\\src\\components\\form-error.tsx":"9","C:\\github\\nuber-eats-frontend\\src\\components\\button.tsx":"10","C:\\github\\nuber-eats-frontend\\src\\__generated__\\globalTypes.ts":"11","C:\\github\\nuber-eats-frontend\\src\\constants.ts":"12","C:\\github\\nuber-eats-frontend\\src\\pages\\client\\restaurant.tsx":"13","C:\\github\\nuber-eats-frontend\\src\\pages\\404.tsx":"14","C:\\github\\nuber-eats-frontend\\src\\components\\header.tsx":"15","C:\\github\\nuber-eats-frontend\\src\\hooks\\useMe.tsx":"16","C:\\github\\nuber-eats-frontend\\src\\pages\\user\\confirm-email.tsx":"17","C:\\github\\nuber-eats-frontend\\src\\pages\\user\\edit-profile.tsx":"18","C:\\github\\nuber-eats-frontend\\src\\components\\restaurant.tsx":"19","C:\\github\\nuber-eats-frontend\\src\\pages\\client\\search.tsx":"20"},{"size":853,"mtime":1611588922528,"results":"21","hashOfConfig":"22"},{"size":425,"mtime":1611520125186,"results":"23","hashOfConfig":"22"},{"size":756,"mtime":1611680244813,"results":"24","hashOfConfig":"22"},{"size":641,"mtime":1611688050087,"results":"25","hashOfConfig":"22"},{"size":1518,"mtime":1611685048420,"results":"26","hashOfConfig":"22"},{"size":1392,"mtime":1611852834087,"results":"27","hashOfConfig":"22"},{"size":4139,"mtime":1611777596643,"results":"28","hashOfConfig":"22"},{"size":4844,"mtime":1611777566880,"results":"29","hashOfConfig":"22"},{"size":318,"mtime":1611589323690,"results":"30","hashOfConfig":"22"},{"size":485,"mtime":1611668239414,"results":"31","hashOfConfig":"22"},{"size":916,"mtime":1611832040608,"results":"32","hashOfConfig":"22"},{"size":228,"mtime":1611777499861,"results":"33","hashOfConfig":"22"},{"size":4902,"mtime":1611853228117,"results":"34","hashOfConfig":"22"},{"size":582,"mtime":1611831445403,"results":"35","hashOfConfig":"22"},{"size":1639,"mtime":1611780874860,"results":"36","hashOfConfig":"22"},{"size":281,"mtime":1611692320697,"results":"37","hashOfConfig":"22"},{"size":2019,"mtime":1611831488074,"results":"38","hashOfConfig":"22"},{"size":3121,"mtime":1611781029910,"results":"39","hashOfConfig":"22"},{"size":702,"mtime":1611842387325,"results":"40","hashOfConfig":"22"},{"size":242,"mtime":1611852749872,"results":"41","hashOfConfig":"22"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},"npjdl",{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"55"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"74","messages":"75","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"47"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"80","messages":"81","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"82"},{"filePath":"83","messages":"84","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"85","messages":"86","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\github\\nuber-eats-frontend\\src\\App.tsx",[],["87","88"],"C:\\github\\nuber-eats-frontend\\src\\reportWebVitals.ts",[],["89","90"],"C:\\github\\nuber-eats-frontend\\src\\index.tsx",[],"C:\\github\\nuber-eats-frontend\\src\\routers\\logged-out-router.tsx",[],["91","92"],"C:\\github\\nuber-eats-frontend\\src\\apollo.ts",[],["93","94"],"C:\\github\\nuber-eats-frontend\\src\\routers\\logged-in-router.tsx",[],"C:\\github\\nuber-eats-frontend\\src\\pages\\login.tsx",[],"C:\\github\\nuber-eats-frontend\\src\\pages\\create-account.tsx",[],"C:\\github\\nuber-eats-frontend\\src\\components\\form-error.tsx",[],"C:\\github\\nuber-eats-frontend\\src\\components\\button.tsx",[],"C:\\github\\nuber-eats-frontend\\src\\__generated__\\globalTypes.ts",[],"C:\\github\\nuber-eats-frontend\\src\\constants.ts",[],"C:\\github\\nuber-eats-frontend\\src\\pages\\client\\restaurant.tsx",[],"C:\\github\\nuber-eats-frontend\\src\\pages\\404.tsx",[],"C:\\github\\nuber-eats-frontend\\src\\components\\header.tsx",["95"],"C:\\github\\nuber-eats-frontend\\src\\hooks\\useMe.tsx",[],"C:\\github\\nuber-eats-frontend\\src\\pages\\user\\confirm-email.tsx",["96","97","98","99"],"C:\\github\\nuber-eats-frontend\\src\\pages\\user\\edit-profile.tsx",["100"],"import { gql, useApolloClient, useMutation } from '@apollo/client';\nimport React from 'react';\nimport { useForm } from 'react-hook-form';\nimport { Button } from '../../components/button';\nimport { EMAIL_REGEX } from '../../constants';\nimport { useMe } from '../../hooks/useMe';\nimport {\n  editProfile,\n  editProfileVariables,\n} from '../../__generated__/editProfile';\n\ninterface IFormProps {\n  email?: string;\n  password?: string;\n}\n\nconst EDIT_PROFILE_MUTATION = gql`\n  mutation editProfile($input: EditProfileInput!) {\n    editProfile(input: $input) {\n      ok\n      error\n    }\n  }\n`;\n\nexport const EditProfile = () => {\n  const { data: userData, refetch } = useMe();\n  const { register, handleSubmit, getValues, formState } = useForm<IFormProps>({\n    defaultValues: {\n      email: userData?.me.email,\n    },\n    mode: 'onChange',\n  });\n  const client = useApolloClient();\n  const onCompleted = async (data: editProfile) => {\n    const {\n      editProfile: { ok },\n    } = data;\n    if (ok && userData) {\n      //update cache\n      const {\n        me: { email: prevEmail, id },\n      } = userData;\n      const { email: newEmail } = getValues();\n      if (prevEmail !== newEmail) {\n        client.writeFragment({\n          id: `User:${id}`,\n          fragment: gql`\n            fragment EditedUser on User {\n              verified\n              email\n            }\n          `,\n          data: {\n            email: newEmail,\n            verified: false,\n          },\n        });\n      }\n      //   await refetch();\n    }\n  };\n  const [editProfile, { loading }] = useMutation<\n    editProfile,\n    editProfileVariables\n  >(EDIT_PROFILE_MUTATION, { onCompleted });\n\n  const onSubmit = () => {\n    // getValues 후 edit profile mutation을 call\n    // 그리고 cache도 update : 나중에 다른 스크린에 필요할 수도 있으므로\n    const { email, password } = getValues();\n    editProfile({\n      variables: {\n        input: {\n          email,\n          ...(password !== '' && { password }), // 아무것도 입력안해서 password에 \"\"들어간 경우 password 항목자체가 없게 해서 \"\"으로 password가 변경되는 것을 막아줌\n        },\n      },\n    });\n  };\n  return (\n    <div className=\"w-full flex flex-col px-5 items-center\">\n      <div className=\"w-full max-w-screen-sm \">\n        <h4 className=\"w-full font-medium text-left text-3xl mb-5\">\n          Edit Profile\n        </h4>\n        <form\n          onSubmit={handleSubmit(onSubmit)}\n          className=\"grid gap-3 mt-5 w-full mb-5\"\n        >\n          <input\n            ref={register({\n              pattern: EMAIL_REGEX,\n            })}\n            name=\"email\"\n            className=\"input\"\n            type=\"email\"\n            placeholder=\"Email\"\n          />\n          <input\n            ref={register}\n            name=\"password\"\n            className=\"input\"\n            type=\"password\"\n            placeholder=\"Password\"\n          />\n          <Button\n            loading={loading}\n            canClick={formState.isValid}\n            actionText=\"Save Profile\"\n          />\n        </form>\n      </div>\n    </div>\n  );\n};\n","C:\\github\\nuber-eats-frontend\\src\\components\\restaurant.tsx",[],"C:\\github\\nuber-eats-frontend\\src\\pages\\client\\search.tsx",[],{"ruleId":"101","replacedBy":"102"},{"ruleId":"103","replacedBy":"104"},{"ruleId":"101","replacedBy":"105"},{"ruleId":"103","replacedBy":"106"},{"ruleId":"101","replacedBy":"107"},{"ruleId":"103","replacedBy":"108"},{"ruleId":"101","replacedBy":"109"},{"ruleId":"103","replacedBy":"110"},{"ruleId":"111","severity":1,"message":"112","line":11,"column":11,"nodeType":"113","messageId":"114","endLine":11,"endColumn":15},{"ruleId":"111","severity":1,"message":"115","line":4,"column":22,"nodeType":"113","messageId":"114","endLine":4,"endColumn":33},{"ruleId":"111","severity":1,"message":"116","line":21,"column":27,"nodeType":"113","messageId":"114","endLine":21,"endColumn":34},{"ruleId":"111","severity":1,"message":"117","line":56,"column":12,"nodeType":"113","messageId":"114","endLine":56,"endColumn":13},{"ruleId":"118","severity":1,"message":"119","line":64,"column":6,"nodeType":"120","endLine":64,"endColumn":8,"suggestions":"121"},{"ruleId":"111","severity":1,"message":"116","line":27,"column":27,"nodeType":"113","messageId":"114","endLine":27,"endColumn":34},"no-native-reassign",["122"],"no-negated-in-lhs",["123"],["122"],["123"],["122"],["123"],["122"],["123"],"@typescript-eslint/no-unused-vars","'data' is assigned a value but never used.","Identifier","unusedVar","'useLocation' is defined but never used.","'refetch' is assigned a value but never used.","'_' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'verifyEmail'. Either include it or remove the dependency array.","ArrayExpression",["124"],"no-global-assign","no-unsafe-negation",{"desc":"125","fix":"126"},"Update the dependencies array to be: [verifyEmail]",{"range":"127","text":"128"},[1617,1619],"[verifyEmail]"]