[{"C:\\github\\nuber-eats-frontend\\src\\App.tsx":"1","C:\\github\\nuber-eats-frontend\\src\\reportWebVitals.ts":"2","C:\\github\\nuber-eats-frontend\\src\\index.tsx":"3","C:\\github\\nuber-eats-frontend\\src\\routers\\logged-out-router.tsx":"4","C:\\github\\nuber-eats-frontend\\src\\apollo.ts":"5","C:\\github\\nuber-eats-frontend\\src\\routers\\logged-in-router.tsx":"6","C:\\github\\nuber-eats-frontend\\src\\pages\\login.tsx":"7","C:\\github\\nuber-eats-frontend\\src\\pages\\create-account.tsx":"8","C:\\github\\nuber-eats-frontend\\src\\components\\form-error.tsx":"9","C:\\github\\nuber-eats-frontend\\src\\components\\button.tsx":"10","C:\\github\\nuber-eats-frontend\\src\\constants.ts":"11","C:\\github\\nuber-eats-frontend\\src\\pages\\404.tsx":"12","C:\\github\\nuber-eats-frontend\\src\\components\\header.tsx":"13","C:\\github\\nuber-eats-frontend\\src\\hooks\\useMe.tsx":"14","C:\\github\\nuber-eats-frontend\\src\\pages\\user\\confirm-email.tsx":"15","C:\\github\\nuber-eats-frontend\\src\\pages\\user\\edit-profile.tsx":"16","C:\\github\\nuber-eats-frontend\\src\\components\\restaurant.tsx":"17","C:\\github\\nuber-eats-frontend\\src\\pages\\client\\search.tsx":"18","C:\\github\\nuber-eats-frontend\\src\\components\\categories.tsx":"19","C:\\github\\nuber-eats-frontend\\src\\pages\\client\\category.tsx":"20","C:\\github\\nuber-eats-frontend\\src\\fragment.ts":"21","C:\\github\\nuber-eats-frontend\\src\\__generated__\\globalTypes.ts":"22","C:\\github\\nuber-eats-frontend\\src\\pages\\client\\restaurants.tsx":"23","C:\\github\\nuber-eats-frontend\\src\\pages\\client\\restaurant.tsx":"24"},{"size":853,"mtime":1611588922528,"results":"25","hashOfConfig":"26"},{"size":425,"mtime":1611520125186,"results":"27","hashOfConfig":"26"},{"size":756,"mtime":1611680244813,"results":"28","hashOfConfig":"26"},{"size":641,"mtime":1611688050087,"results":"29","hashOfConfig":"26"},{"size":1518,"mtime":1611685048420,"results":"30","hashOfConfig":"26"},{"size":1657,"mtime":1611862457072,"results":"31","hashOfConfig":"26"},{"size":4139,"mtime":1611777596643,"results":"32","hashOfConfig":"26"},{"size":4844,"mtime":1611777566880,"results":"33","hashOfConfig":"26"},{"size":318,"mtime":1611589323690,"results":"34","hashOfConfig":"26"},{"size":485,"mtime":1611668239414,"results":"35","hashOfConfig":"26"},{"size":228,"mtime":1611777499861,"results":"36","hashOfConfig":"26"},{"size":582,"mtime":1611831445403,"results":"37","hashOfConfig":"26"},{"size":1639,"mtime":1611780874860,"results":"38","hashOfConfig":"26"},{"size":281,"mtime":1611692320697,"results":"39","hashOfConfig":"26"},{"size":2019,"mtime":1611831488074,"results":"40","hashOfConfig":"26"},{"size":3121,"mtime":1611781029910,"results":"41","hashOfConfig":"26"},{"size":824,"mtime":1611862534335,"results":"42","hashOfConfig":"26"},{"size":1680,"mtime":1611856312555,"results":"43","hashOfConfig":"26"},{"size":521,"mtime":1611858079596,"results":"44","hashOfConfig":"26"},{"size":1276,"mtime":1611860418568,"results":"45","hashOfConfig":"26"},{"size":364,"mtime":1611860050449,"results":"46","hashOfConfig":"26"},{"size":1139,"mtime":1611863027515,"results":"47","hashOfConfig":"26"},{"size":4912,"mtime":1611861934140,"results":"48","hashOfConfig":"26"},{"size":964,"mtime":1611864396145,"results":"49","hashOfConfig":"26"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"52"},"npjdl",{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"55"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"60"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"63"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"55"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"78","messages":"79","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"55"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"84","messages":"85","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"86"},{"filePath":"87","messages":"88","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"89","messages":"90","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"91","messages":"92","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"93","messages":"94","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"95","messages":"96","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"97","messages":"98","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"99","messages":"100","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"101","messages":"102","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"C:\\github\\nuber-eats-frontend\\src\\App.tsx",[],["103","104"],"C:\\github\\nuber-eats-frontend\\src\\reportWebVitals.ts",[],["105","106"],"C:\\github\\nuber-eats-frontend\\src\\index.tsx",[],"C:\\github\\nuber-eats-frontend\\src\\routers\\logged-out-router.tsx",[],["107","108"],"C:\\github\\nuber-eats-frontend\\src\\apollo.ts",[],["109","110"],"C:\\github\\nuber-eats-frontend\\src\\routers\\logged-in-router.tsx",[],"C:\\github\\nuber-eats-frontend\\src\\pages\\login.tsx",[],"C:\\github\\nuber-eats-frontend\\src\\pages\\create-account.tsx",[],"C:\\github\\nuber-eats-frontend\\src\\components\\form-error.tsx",[],"C:\\github\\nuber-eats-frontend\\src\\components\\button.tsx",[],"C:\\github\\nuber-eats-frontend\\src\\constants.ts",[],"C:\\github\\nuber-eats-frontend\\src\\pages\\404.tsx",[],"C:\\github\\nuber-eats-frontend\\src\\components\\header.tsx",["111"],"C:\\github\\nuber-eats-frontend\\src\\hooks\\useMe.tsx",[],"C:\\github\\nuber-eats-frontend\\src\\pages\\user\\confirm-email.tsx",["112","113","114","115"],"C:\\github\\nuber-eats-frontend\\src\\pages\\user\\edit-profile.tsx",["116"],"import { gql, useApolloClient, useMutation } from '@apollo/client';\nimport React from 'react';\nimport { useForm } from 'react-hook-form';\nimport { Button } from '../../components/button';\nimport { EMAIL_REGEX } from '../../constants';\nimport { useMe } from '../../hooks/useMe';\nimport {\n  editProfile,\n  editProfileVariables,\n} from '../../__generated__/editProfile';\n\ninterface IFormProps {\n  email?: string;\n  password?: string;\n}\n\nconst EDIT_PROFILE_MUTATION = gql`\n  mutation editProfile($input: EditProfileInput!) {\n    editProfile(input: $input) {\n      ok\n      error\n    }\n  }\n`;\n\nexport const EditProfile = () => {\n  const { data: userData, refetch } = useMe();\n  const { register, handleSubmit, getValues, formState } = useForm<IFormProps>({\n    defaultValues: {\n      email: userData?.me.email,\n    },\n    mode: 'onChange',\n  });\n  const client = useApolloClient();\n  const onCompleted = async (data: editProfile) => {\n    const {\n      editProfile: { ok },\n    } = data;\n    if (ok && userData) {\n      //update cache\n      const {\n        me: { email: prevEmail, id },\n      } = userData;\n      const { email: newEmail } = getValues();\n      if (prevEmail !== newEmail) {\n        client.writeFragment({\n          id: `User:${id}`,\n          fragment: gql`\n            fragment EditedUser on User {\n              verified\n              email\n            }\n          `,\n          data: {\n            email: newEmail,\n            verified: false,\n          },\n        });\n      }\n      //   await refetch();\n    }\n  };\n  const [editProfile, { loading }] = useMutation<\n    editProfile,\n    editProfileVariables\n  >(EDIT_PROFILE_MUTATION, { onCompleted });\n\n  const onSubmit = () => {\n    // getValues 후 edit profile mutation을 call\n    // 그리고 cache도 update : 나중에 다른 스크린에 필요할 수도 있으므로\n    const { email, password } = getValues();\n    editProfile({\n      variables: {\n        input: {\n          email,\n          ...(password !== '' && { password }), // 아무것도 입력안해서 password에 \"\"들어간 경우 password 항목자체가 없게 해서 \"\"으로 password가 변경되는 것을 막아줌\n        },\n      },\n    });\n  };\n  return (\n    <div className=\"w-full flex flex-col px-5 items-center\">\n      <div className=\"w-full max-w-screen-sm \">\n        <h4 className=\"w-full font-medium text-left text-3xl mb-5\">\n          Edit Profile\n        </h4>\n        <form\n          onSubmit={handleSubmit(onSubmit)}\n          className=\"grid gap-3 mt-5 w-full mb-5\"\n        >\n          <input\n            ref={register({\n              pattern: EMAIL_REGEX,\n            })}\n            name=\"email\"\n            className=\"input\"\n            type=\"email\"\n            placeholder=\"Email\"\n          />\n          <input\n            ref={register}\n            name=\"password\"\n            className=\"input\"\n            type=\"password\"\n            placeholder=\"Password\"\n          />\n          <Button\n            loading={loading}\n            canClick={formState.isValid}\n            actionText=\"Save Profile\"\n          />\n        </form>\n      </div>\n    </div>\n  );\n};\n","C:\\github\\nuber-eats-frontend\\src\\components\\restaurant.tsx",[],"C:\\github\\nuber-eats-frontend\\src\\pages\\client\\search.tsx",["117","118"],"C:\\github\\nuber-eats-frontend\\src\\components\\categories.tsx",[],"C:\\github\\nuber-eats-frontend\\src\\pages\\client\\category.tsx",["119","120","121"],"C:\\github\\nuber-eats-frontend\\src\\fragment.ts",[],"C:\\github\\nuber-eats-frontend\\src\\__generated__\\globalTypes.ts",[],"C:\\github\\nuber-eats-frontend\\src\\pages\\client\\restaurants.tsx",[],"C:\\github\\nuber-eats-frontend\\src\\pages\\client\\restaurant.tsx",["122"],{"ruleId":"123","replacedBy":"124"},{"ruleId":"125","replacedBy":"126"},{"ruleId":"123","replacedBy":"127"},{"ruleId":"125","replacedBy":"128"},{"ruleId":"123","replacedBy":"129"},{"ruleId":"125","replacedBy":"130"},{"ruleId":"123","replacedBy":"131"},{"ruleId":"125","replacedBy":"132"},{"ruleId":"133","severity":1,"message":"134","line":11,"column":11,"nodeType":"135","messageId":"136","endLine":11,"endColumn":15},{"ruleId":"133","severity":1,"message":"137","line":4,"column":22,"nodeType":"135","messageId":"136","endLine":4,"endColumn":33},{"ruleId":"133","severity":1,"message":"138","line":21,"column":27,"nodeType":"135","messageId":"136","endLine":21,"endColumn":34},{"ruleId":"133","severity":1,"message":"139","line":56,"column":12,"nodeType":"135","messageId":"136","endLine":56,"endColumn":13},{"ruleId":"140","severity":1,"message":"141","line":64,"column":6,"nodeType":"142","endLine":64,"endColumn":8,"suggestions":"143"},{"ruleId":"133","severity":1,"message":"138","line":27,"column":27,"nodeType":"135","messageId":"136","endLine":27,"endColumn":34},{"ruleId":"133","severity":1,"message":"139","line":35,"column":12,"nodeType":"135","messageId":"136","endLine":35,"endColumn":13},{"ruleId":"140","severity":1,"message":"144","line":50,"column":6,"nodeType":"142","endLine":50,"endColumn":25,"suggestions":"145"},{"ruleId":"133","severity":1,"message":"146","line":2,"column":17,"nodeType":"135","messageId":"136","endLine":2,"endColumn":26},{"ruleId":"133","severity":1,"message":"137","line":3,"column":10,"nodeType":"135","messageId":"136","endLine":3,"endColumn":21},{"ruleId":"133","severity":1,"message":"147","line":39,"column":17,"nodeType":"135","messageId":"136","endLine":39,"endColumn":24},{"ruleId":"133","severity":1,"message":"147","line":29,"column":11,"nodeType":"135","messageId":"136","endLine":29,"endColumn":18},"no-native-reassign",["148"],"no-negated-in-lhs",["149"],["148"],["149"],["148"],["149"],["148"],["149"],"@typescript-eslint/no-unused-vars","'data' is assigned a value but never used.","Identifier","unusedVar","'useLocation' is defined but never used.","'refetch' is assigned a value but never used.","'_' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'verifyEmail'. Either include it or remove the dependency array.","ArrayExpression",["150"],"React Hook useEffect has missing dependencies: 'callQuery', 'called', 'data', and 'loading'. Either include them or remove the dependency array.",["151"],"'useEffect' is defined but never used.","'loading' is assigned a value but never used.","no-global-assign","no-unsafe-negation",{"desc":"152","fix":"153"},{"desc":"154","fix":"155"},"Update the dependencies array to be: [verifyEmail]",{"range":"156","text":"157"},"Update the dependencies array to be: [callQuery, called, data, history, loading, location]",{"range":"158","text":"159"},[1617,1619],"[verifyEmail]",[1402,1421],"[callQuery, called, data, history, loading, location]"]